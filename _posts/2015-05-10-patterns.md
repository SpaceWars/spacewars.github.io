---
layout: post
title:  "Padrões de Projeto de Software"
date:   2015-05-10 21:50:03
category: doc
description: Apresentar os padrões no jogo
---

# Patterns
---

## Criador

O framework utilizado possui a seguinte estrutura, onde o director é responsável
por rodar as cenas (scenes), que são responsáveis por criar camadas (layers), que, por
sua vez, cria e gerencia sprites.

<center>
  {% mermaid %}
  sequenceDiagram
    director->>Scene: run()
    Scene->>Layer: create()
    Layer->>Sprite: create()
  {% endmermaid %}
</center>


## Polimorfismo

Devido a característica de um jogo ser basicamente orientado a eventos, as *Layers* tenderão a possuir sobrescritas de métodos, devido a ser nessa classe onde as funções responsáveis por eventos estarem originalmente definidas.

    def on_key_release(self, keys, mod):
        print 'Centering spaceship'
        self.spaceship.center_spaceship()

Características das funções de evento, na biblioteca **cocos** os métodos responsáveis por eventos começam com a *string* "*on_*".

    def on_text_motion(self, keys):
        if keys == key.MOTION_LEFT:
            print 'Move Spaceship to left'
            self.spaceship.move_left()
        elif keys == key.MOTION_RIGHT:
            print 'Move Spaceship to rigth'
            self.spaceship.move_rigth()

Alguns modelos já implementados encontram-se na cena principal do jogo, onde é rastreada o pressionamento das teclas para movimentação da espaçonave e a liberação das mesmas.

## Object Pool

Outro padrão bastante comum em jogos é a presença de uma *pool* de objetos. Este padrão é normalmente utilizando quando há uma alta demanda de objetos e há a possibilidade de reuso de um objeto. Assim é criado uma *pool* - normalmente uma lista -  onde todos os objetos são instanciados de uma vez, para serem usados sob demanda no decorrer da aplicação.

    class GameScene(Layer):
        is_event_handler = True

        def __init__(self):
            super(GameScene, self).__init__()
            self.background = BackgroundLayer('backgrounds/bluespace.png')
            self.spaceship = SpaceShipSprite()
            self.aerolites = []
            self.rohenians = []
            for x in xrange(50, WIDTH, 100):
                self.aerolites.append(AeroliteSprite(width=x))
                self.rohenians.append(RohenianSprite())